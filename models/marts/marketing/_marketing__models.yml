version: 2

models:

  - name: dm__customers_metrics
    description: >
      This table is a dimension, it contains data with metrics that evaluate the customer's performance
      throughout their life cycle within the company,
      with important information for strategic analysis.
    columns:
      - name: customer_id
        description: Individual customer ID column.
        tests:
          - unique
          - not_null

      - name: customer_name
        description: Customer name column.

      - name: customer_vip
        description: Column that tells us whether a customer is VIP or not.
        tests:
        - not_null
        - accepted_values:
            values: ['TRUE', 'FALSE']

      - name: total_customers_orders
        description: Total number of customer orders in their life cycle within the company.
        tests:
          - not_null

      - name: total_spend
        description: Total customer spending throughout their life cycle within the company.

      - name: first_purchase
        description: The customer's first purchase within the company.

      - name: last_purchase
        description: The customer's last purchase within the company.


  - name: dm__products_metrics
    description: >
      This table is a dimension, which has information to derive analyses at the product level,
      with a focus on columns that evaluate the product's performance over the company's time,
      generating important data useful for strategic analyses.
    columns:
      - name: product_id
        description: Unique id to identify the product.
        tests:
          - not_null
          - unique

      - name: product_price
        description: Product price.

      - name: product_category
        description: Category the product belongs to.

      - name: total_sales_count
        description: Total sales in which the product was sold.
        tests:
          - not_null

      - name: total_revenue_usd
        description: Total revenue generated by the product in dollars.
        tests:
          - not_null

      - name: average_sale_value_usd
        description: Average sales value in which the product is related in dollars.

      - name: first_sale_product
        description: First sale made with the product.

      - name: last_sale_product
        description: Last sale made in which the product is related.


  - name: dm__stores_metrics
    description: >
      This table is a dimension, which aims to analyze the company's stores, focusing on metrics that evaluate
      their performance within the company in terms of sales and aggregates data for strategic analyses.
    columns:
      - name: store_id
        description: Unique ID for store identification.
        tests:
          - not_null
          - unique

      - name: store_name
        description: Name store.

      - name: store_city
        description: City where the store is located.

      - name: state
        description: State in which the store is located.

      - name: total_sales_store
        description: Total sales made by the store, throughout the company's life cycle.
        tests:
          - not_null

      - name: total_revenue_store
        description: Total revenue generated by the store, over the company's life cycle.
        tests:
          - not_null

      - name: average_sale_store
        description: Average value of a store sale.

      - name: first_sale
        description: First sale from the store within the company.

      - name: last_sale
        description: Last sale of the store within the company.
